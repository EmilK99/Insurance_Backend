version: '3.9'
services:
  flightapp_backend:
    build:
      context: .
      dockerfile: ./Dockerfile
    image: 706235040724.dkr.ecr.eu-central-1.amazonaws.com/flightapp_backend:v0.01
    restart: always
    depends_on:
      - database
  database:
    image: postgres
    restart: always
    environment:
      - POSTGRES_PASSWORD=sEcRET_pASSw0rd
      - POSTGRES_USER=postgres
      - POSTGRES_DB=flightapp_db
    volumes:
      - db_data:/var/lib/postgresql/data        

volumes:
  db_data:
